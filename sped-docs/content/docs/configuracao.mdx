---
title: Configura칞칚o
description: Como configurar certificados digitais e ambientes para uso da biblioteca
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';

# Configura칞칚o

## Autentica칞칚o por Certificado Digital

A biblioteca suporta dois tipos de autentica칞칚o por certificado digital:

### Op칞칚o 1: Certificado PFX

```typescript
import { UFCode, Ambiente } from "@camu-ai/sped-nfe"
import { readFileSync } from "fs"

const pfx = readFileSync("./certificado.pfx")

const config = {
  cUFAutor: UFCode.PR, // C칩digo do estado
  cnpj: "12345678901234", // CNPJ da empresa
  tpAmb: Ambiente.HOMOLOGACAO, // Ambiente
  pfx: pfx, // Buffer do arquivo PFX
  passphrase: "senha-do-certificado", // Senha do certificado
}
```

### Op칞칚o 2: Arquivos Separados (Cert/Key)

```typescript
import { UFCode, Ambiente } from "@camu-ai/sped-nfe"
import { readFileSync } from "fs"

const cert = readFileSync("./certificado.crt", "utf8")
const key = readFileSync("./chave-privada.key", "utf8")

const config = {
  cUFAutor: UFCode.PR,
  cnpj: "12345678901234",
  tpAmb: Ambiente.HOMOLOGACAO,
  cert: cert, // Conte칰do do certificado em string
  key: key, // Conte칰do da chave privada em string
}
```

## Par칙metros de Configura칞칚o

### Par칙metros Obrigat칩rios

| Par칙metro | Tipo | Descri칞칚o |
|-----------|------|-----------|
| `cUFAutor` | UFCode \| string | C칩digo do estado onde a empresa est치 autorizada |
| `cnpj` ou `cpf` | string | CNPJ (14 d칤gitos) ou CPF (11 d칤gitos) |
| `tpAmb` | Ambiente \| '1' \| '2' | Ambiente: Produ칞칚o/1 ou Homologa칞칚o/2 |

### Autentica칞칚o (escolha uma op칞칚o)

**Op칞칚o PFX:**
| Par칙metro | Tipo | Descri칞칚o |
|-----------|------|-----------|
| `pfx` | Buffer | Conte칰do do arquivo de certificado PFX |
| `passphrase` | string | Senha do certificado PFX |

**Op칞칚o Cert/Key:**
| Par칙metro | Tipo | Descri칞칚o |
|-----------|------|-----------|
| `cert` | string | Conte칰do do certificado |
| `key` | string | Conte칰do da chave privada |

## C칩digos de Estados (cUFAutor)

Voc칡 pode usar o enum `UFCode` ou os c칩digos diretos:

<Tabs items={['Enum (Recomendado)', 'C칩digo Direto']}>
<Tab value="Enum (Recomendado)">

```typescript
import { UFCode } from "@camu-ai/sped-nfe"

const config = {
  cUFAutor: UFCode.SP, // S칚o Paulo
  // ... outras configura칞칫es
}
```

</Tab>
<Tab value="C칩digo Direto">

```typescript
const config = {
  cUFAutor: "35", // S칚o Paulo
  // ... outras configura칞칫es
}
```

</Tab>
</Tabs>

### Estados Dispon칤veis

| Estado | C칩digo | Enum |
|--------|--------|------|
| Rond칪nia | '11' | `UFCode.RO` |
| Acre | '12' | `UFCode.AC` |
| Amazonas | '13' | `UFCode.AM` |
| Roraima | '14' | `UFCode.RR` |
| Par치 | '15' | `UFCode.PA` |
| Amap치 | '16' | `UFCode.AP` |
| Tocantins | '17' | `UFCode.TO` |
| Maranh칚o | '21' | `UFCode.MA` |
| Piau칤 | '22' | `UFCode.PI` |
| Cear치 | '23' | `UFCode.CE` |
| Rio Grande do Norte | '24' | `UFCode.RN` |
| Para칤ba | '25' | `UFCode.PB` |
| Pernambuco | '26' | `UFCode.PE` |
| Alagoas | '27' | `UFCode.AL` |
| Sergipe | '28' | `UFCode.SE` |
| Bahia | '29' | `UFCode.BA` |
| Minas Gerais | '31' | `UFCode.MG` |
| Esp칤rito Santo | '32' | `UFCode.ES` |
| Rio de Janeiro | '33' | `UFCode.RJ` |
| S칚o Paulo | '35' | `UFCode.SP` |
| Paran치 | '41' | `UFCode.PR` |
| Santa Catarina | '42' | `UFCode.SC` |
| Rio Grande do Sul | '43' | `UFCode.RS` |
| Mato Grosso do Sul | '50' | `UFCode.MS` |
| Mato Grosso | '51' | `UFCode.MT` |
| Goi치s | '52' | `UFCode.GO` |
| Distrito Federal | '53' | `UFCode.DF` |

## Configura칞칚o de Ambiente

### Ambiente de Homologa칞칚o

Use sempre o ambiente de homologa칞칚o para testes:

```typescript
import { Ambiente } from "@camu-ai/sped-nfe"

const configHomologacao = {
  cUFAutor: "41",
  cnpj: "12345678901234",
  tpAmb: Ambiente.HOMOLOGACAO, // ou "2"
  pfx: certificadoHomologacao,
  passphrase: "senha-hom",
}
```

### Ambiente de Produ칞칚o

<Callout type="warn">
**Aten칞칚o**: Use o ambiente de produ칞칚o apenas ap칩s validar completamente sua implementa칞칚o em homologa칞칚o.
</Callout>

```typescript
import { Ambiente } from "@camu-ai/sped-nfe"

const configProducao = {
  cUFAutor: "41",
  cnpj: "12345678901234",
  tpAmb: Ambiente.PRODUCAO, // ou "1"
  pfx: certificadoProducao,
  passphrase: "senha-prod",
}
```

## Trabalhando com CPF

Para pessoas f칤sicas, use `cpf` ao inv칠s de `cnpj`:

```typescript
const configComCpf = {
  cUFAutor: "41",
  cpf: "12345678901", // 11 d칤gitos
  tpAmb: "2",
  pfx: bufferCertificado,
  passphrase: "senha",
}
```

## Valida칞칚o de Configura칞칚o

A biblioteca valida automaticamente sua configura칞칚o. Os principais erros que podem ocorrer:

- **Certificado inv치lido**: Verifique se o arquivo PFX n칚o est치 corrompido
- **Senha incorreta**: Certifique-se de que a passphrase est치 correta
- **CNPJ/CPF inv치lido**: Verifique se os d칤gitos est칚o corretos
- **UF inexistente**: Use um c칩digo de UF v치lido

## Pr칩ximos Passos

Com a configura칞칚o pronta, voc칡 pode:

- [游닍 Consultar documentos NFe](/docs/consulta-nfe)
- [游닋 Enviar eventos de manifesta칞칚o](/docs/eventos)
- [丘멆잺 Ler as regras cr칤ticas dos web services](/docs/regras-web-services)